<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Preenchimento de Receita</title>

<!-- ðŸ”¥ FIREBASE AUTH -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>

<!-- PDF-LIB -->
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#f4f4f4}

/* LOGIN */
#login{
 max-width:400px;
 margin:100px auto;
 background:#fff;
 padding:20px;
 border-radius:8px;
}
#login h2{text-align:center}

/* APP */
.container{max-width:750px;margin:auto;padding:16px;display:none}

h1{text-align:center;margin-bottom:20px}
.campo{margin-bottom:16px}
label{font-weight:bold;display:block;margin-bottom:6px}

input,select,textarea{
 width:100%;
 padding:12px;
 font-size:16px;
 box-sizing:border-box
}

button{
 padding:12px;
 font-size:16px;
 border:none;
 border-radius:6px;
 cursor:pointer;
 background:#27ae60;
 color:#fff;
}
button.sair{background:#e74c3c;margin-bottom:16px}

.medicacao-box{background:#fff;border:1px solid #ccc;padding:10px;margin-bottom:10px}
.medicacao-linha{display:flex;gap:6px;align-items:center}
.num{width:32px;font-weight:bold;text-align:center}
.btn-apagar{background:#e74c3c}
.btn-lupa{background:#34495e}
.btn-add{background:#2980b9;margin-top:8px}

/* DATA */
.data-box{display:flex;gap:10px}
.data-box input{text-align:center}

/* SIDEBAR */
.sidebar{
 position:fixed;
 inset:0;
 background:#fff;
 z-index:999;
 display:none;
 flex-direction:column;
}
.sidebar-topo{background:#e74c3c;padding:6px 10px}
.sidebar-topo button{background:#c0392b;padding:6px 10px;font-size:14px}
.sidebar-busca{padding:8px}
.sidebar-busca input{padding:6px 8px;font-size:13px;height:32px}
.sidebar-lista{flex:1;overflow-y:auto;padding:6px 8px}
.categoria{font-weight:bold;margin:10px 0 4px;font-size:14px}
.item{padding:6px 4px;border-bottom:1px dashed #ccc;font-size:14px;cursor:pointer}
.item:hover{background:#f0f0f0}
</style>
</head>

<body>

<!-- ðŸ” LOGIN -->
<div id="login">
<h2>Acesso restrito</h2>
<input id="email" placeholder="Email">
<input id="senha" type="password" placeholder="Senha">
<button onclick="login()">Entrar</button>
<p id="erro" style="color:red;text-align:center"></p>
</div>

<!-- ðŸ”“ APP -->
<div class="container" id="app">

<h1>Receita MÃ©dica</h1>
<button class="sair" onclick="logout()">Sair</button>

<div class="campo">
<label>Selecionar PDF base</label>
<input type="file" id="pdfBase" accept="application/pdf">
</div>

<div class="campo">
<label>NOME DO PACIENTE</label>
<input id="nomePaciente" oninput="this.value=this.value.toUpperCase()">
</div>

<div class="campo">
<label>USO</label>
<select id="uso">
<option>USO ORAL</option>
<option>USO TÃ“PICO</option>
</select>
</div>

<div class="campo">
<label>MEDICAÃ‡Ã•ES</label>
<div id="listaMedicacoes"></div>
<button type="button" class="btn-add" onclick="adicionarMedicacao()">âž• Adicionar MedicaÃ§Ã£o</button>
</div>

<div class="campo">
<label>DATA</label>
<div class="data-box">
<input id="dataDia" placeholder="DD" maxlength="2">
<input id="dataMes" placeholder="MM" maxlength="2">
<input id="dataAno" placeholder="AAAA" maxlength="4">
</div>
</div>

<button type="button" onclick="gerarPDF()">ðŸ“„ Gerar PDF</button>
</div>

<!-- SIDEBAR -->
<div id="sidebar" class="sidebar">
 <div class="sidebar-topo">
  <button onclick="fecharSidebar()">Fechar</button>
 </div>
 <div class="sidebar-busca">
  <input placeholder="Buscar..." oninput="renderizarLista(this.value)">
 </div>
 <div id="listaSidebar" class="sidebar-lista"></div>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG */
firebase.initializeApp({
 apiKey: "AIzaSyAhWOQRO47_RiBjj2RG4BXf7lhYy6KNiDg",
 authDomain: "receituario-3c175.firebaseapp.com",
 projectId: "receituario-3c175",
 appId: "1:809180223495:web:b6004647b7a0c6965f32a2"
});
const auth = firebase.auth();

/* LOGIN */
function login(){
 auth.signInWithEmailAndPassword(
  email.value,
  senha.value
 ).catch(()=>erro.innerText="Login ou senha invÃ¡lidos");
}

/* LOGOUT */
function logout(){
 auth.signOut();
}

/* ESTADO */
auth.onAuthStateChanged(user=>{
 if(user){
  login.style.display="none";
  app.style.display="block";
 }else{
  login.style.display="block";
  app.style.display="none";
 }
});

/* ======= SEU CÃ“DIGO ORIGINAL ABAIXO (INALTERADO) ======= */
const LIMITE = 8;
let campoAtual = null;
function cap(t){return t?t[0].toUpperCase()+t.slice(1):""}

/* ðŸ‘‰ BANCO DE MEDICAÃ‡Ã•ES (mantido igual) */
const banco = [ /* TODO o seu banco original aqui, sem alteraÃ§Ã£o */ ];

/* (todo o restante do seu JS de medicaÃ§Ã£o + PDF continua igual) */
</script>

</body>
</html>
